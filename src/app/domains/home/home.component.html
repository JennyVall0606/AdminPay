<app-header></app-header>

<main>
  <div class="container">
    <div class="sidebar">
      <ul class="list-group">
        <li class="list-group-item">
          <a (click)="showInfo('payments')">{{ translations[language].payments }}</a>
        </li>
        <li class="list-group-item">
          <a (click)="showInfo('profile')">{{ translations[language].profile }}</a>
        </li>
      </ul>
    </div>

    <div class="content mt-3">
      <div *ngIf="selectedInfo">
      

     <!-- Vista de Métodos de Pago y Transacciones -->
      <div *ngIf="selectedInfo && selectedInfo.title === translations[language].payments">
       <h3>{{ translations[language].payments }}</h3>

  <!-- Sección de Métodos de Pago -->
  <div class="d-flex flex-wrap">
    <div class="icon-box me-3 mb-3" (click)="showPaymentDetails(1)">
      <i class="fas fa-money-bill-wave fa-3x"></i>
      <p>{{ translations[language].method }} 1</p>
    </div>
    <div class="icon-box me-3 mb-3" (click)="showPaymentDetails(2)">
      <i class="fas fa-credit-card fa-3x"></i>
      <p>{{ translations[language].method }} 2</p>
    </div>
    <div class="icon-box me-3 mb-3" (click)="showPaymentDetails(3)">
      <i class="fas fa-wallet fa-3x"></i>
      <p>{{ translations[language].method }} 3</p>
    </div>
  </div>

  <!-- Tabla de Pagos -->
  <div *ngIf="showPaymentsTable && selectedPayment.length > 0">
    <h4>{{ translations[language].payments }}</h4>
    <table class="table table-striped table-bordered mt-3">
      <thead class="thead-dark">
        <tr>
          <th>{{ translations[language].id }}</th>
          <th>{{ translations[language].amount }}</th>
          <th>{{ translations[language].date }}</th>
          <th>{{ translations[language].status }}</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let payment of selectedPayment">
          <td>{{ payment.id }}</td>
          <td>{{ payment.amount }}</td>
          <td>{{ payment.date }}</td>
          <td>{{ payment.status }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>


<div *ngIf="showBillingsTable && selectedPayment.length > 0">
  <h4>{{ translations[language].billings }}</h4>
  <table class="table table-striped table-bordered mt-3">
    <thead class="thead-dark">
      <tr>
        <th>{{ translations[language].id }}</th>
        <th>{{ translations[language].billingName }}</th>
        <th>{{ translations[language].dueDate }}</th>
        <th>{{ translations[language].total }}</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let billing of billings">
        <td>{{ billing.id }}</td>
        <td>{{ billing.billingName }}</td>
        <td>{{ billing.dueDate }}</td>
        <td>{{ billing.total }}</td>
      </tr>
    </tbody>
  </table>
</div>



        <div *ngIf="selectedInfo.title === translations[language].billings">
          <div class="d-flex flex-wrap">
            <div class="icon-box me-3 mb-3">
              <i class="fas fa-file-invoice-dollar fa-3x"></i>
              <p>{{ translations[language].billingName }} 1</p>
            </div>
            <div class="icon-box me-3 mb-3">
              <i class="fas fa-receipt fa-3x"></i>
              <p>{{ translations[language].billingName }} 2</p>
            </div>
            <div class="icon-box me-3 mb-3">
              <i class="fas fa-calendar-alt fa-3x"></i>
              <p>{{ translations[language].billingName }} 3</p>
            </div>
          </div>
        </div>

        <div *ngIf="selectedInfo.title === translations[language].profile">
          <h3>{{ translations[language].profile }}</h3>
          <form>
            <div class="mb-3">
              <label for="firstName" class="form-label">{{ translations[language].firstname }}</label>
              <input type="text" id="firstName" class="form-control" [(ngModel)]="profile.firstname" name="firstname">
            </div>
            <div class="mb-3">
              <label for="lastName" class="form-label">{{ translations[language].lastname }}</label>
              <input type="text" id="lastName" class="form-control" [(ngModel)]="profile.lastname" name="lastname">
            </div>
            <div class="mb-3">
              <label for="email" class="form-label">{{ translations[language].email }}</label>
              <input type="email" id="email" class="form-control" [(ngModel)]="profile.email" name="email">
            </div>
            <div class="mb-3">
              <label for="birthday" class="form-label">{{ translations[language].birthday }}</label>
              <input type="date" id="birthday" class="form-control" [(ngModel)]="profile.birthday" name="birthday">
            </div>
            <div class="mb-3">
              <label for="address" class="form-label">{{ translations[language].address }}</label>
              <input type="text" id="address" class="form-control" [(ngModel)]="profile.address" name="address">
            </div>
            <div class="mb-3">
              <label for="profilePicture" class="form-label">{{ translations[language].profilePicture }}</label>
              <input type="file" id="profilePicture" class="form-control" (change)="onFileSelected($event)">
            </div>
            <button type="submit" class="btn btn-primary">{{ translations[language].saveChanges }}</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <div class="language-selector">
    <button (click)="changeLanguage('es')" class="btn">
      <img src="https://upload.wikimedia.org/wikipedia/en/9/9a/Flag_of_Spain.svg" alt="Español" class="flag-icon" />
    </button>
    <button (click)="changeLanguage('en')" class="btn">
      <img src="https://upload.wikimedia.org/wikipedia/en/a/ae/Flag_of_the_United_Kingdom.svg" alt="English" class="flag-icon" />
    </button>
  </div>
</main>
